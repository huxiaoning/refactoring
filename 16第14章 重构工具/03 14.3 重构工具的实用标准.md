# 14.3 重构工具的实用标准

<br>

工具之所以被创造出来，是为了帮助人们完成工作。

如果工具不能适应人们的工作方式，人们就不会使用它。

重构工具的最重要要求就是：和其他工具共同集成出重构过程。

<br>

### 速度

<br>

重构前的分析和必要调整，可能会耗费较多时间，因为它们有可能非常复杂。

工具设计者必须考虑这些前期工作对时间和准确性的影响。

如果重构前需要大量准备工作，程序员就不会使用自动化重构工具，他们宁可手工进行重构。

是的，开发速度总是很重要的。在开发`Refactoring Browser`的过程中，有数个重构手法并没有被我们实现出来，正是因为我们无法在可被接受的时间内安全实现它们。

但是我们的工作仍然颇有成绩，绝大多数重构都可以在极短时间内以极高的准确度完成。

计算机科学家总是希望能够覆盖特定方法无法处理的所有边界情况，但事实上绝大多数程序并不涉及那些边界情况。

因此，简单而快速的做法便可很好地胜任这些工作。

<br>

如果重构前的分析需要花费太长时间，一个简单的解决办法就是：直接询问程序员你所需要的信息。

这种办法把保证准确性的责任交给了程序员，于是分析过程可以进行得更快一些。

很多时候程序员其实都知道必要信息。

尽管这种办法可能不够安全(因为程序员有可能犯错)，但出错的责任也一部分落在了程序员肩上。

讽刺的是，这竟然使程序员更有可能使用这些工具，因为他们无需倚赖程序的试错来收集信息。

<br>

### 撤销

<br>

自动化重构令开发者得以采用探索方式进行设计：你可以试着把代码移到他处，观察新设计方案是否有效。

由于我们假设重构都能够保持程序的原本行为，所以反向重构(亦即对原重构的撤销)也应该不影响程序的原本行为。

`Refactoring Browser`的早期版本并没有撤销功能，这使用户无法对重构充满信心。

重构的撤销相当困难。

但是很多时候我们偏偏必须找出程序重构前的版本，重新开始，这可真够讨厌的。

于是我们后来为`Refactoring Browser`加上了撤销功能，从而又克服了一个障碍。

现在，我们可以放心尝试，不会遭受任何惩罚，因为我们总是可以回到原先的任何一个版本。

我们可以建立新的类、搬移函数、观察代码的行为，而后又改变想法，走另一个完全不同的方向。

这一切都可以非常快速地完成。

<br>

### 与其他工具集成

<br>

过去十年以来，集成开发环境`(IDE)`已经成为绝大多数开发项目的核心工具。

`IDE`将编辑器、编译器、连接器、调试器以及程序开发所需的其他所有工具，都集成于一起，开发者可以在同一个环境中极方便地使用所有这些工具。

`Refactoring Browser for Smalltak`早期版本是一个独立于标准`Smaltak`开发工具之外的工具，我们发现根本没人使用这样的产品，就连我们自己都不用。

但是把重构功能直接集成到`Smalltalk Browser`之后，我们就开始经常使用它。

工具是否触手可及造成了这一切的不同。

<br>

