# 做法

<br>

使用`Replace Conditional with Polymorphism (255)`之前，首先必须有一个继承结构。

你可能已经通过先前的重构得到了这一结构。

如果还没有，现在就需要建立它。

<br>

要建立继承结构，有两种选择：``Replace Type Code with Subclasses (223)`和`Replace Type Code with State/Strategy (227)`。

前一种做法比较简单，因此应该尽可能使用它。 

但如果你需要在对象创建好之后修改类型码，就不能使用继承手法，只能使用`State/Strategy`模式。

此外，如果由于其他原因，要重构的类已经有了子类，那么也得使用`State/Strategy`。

记住，如果若干`switch`语句针对的是同一个类型码，你只需针对这个类型码建立一个继承结构就行了。

<br>

现在，可以向条件表达式开战了。

你的目标可能是`switch`语句，也可能是`if`语句。

- 如果要处理的条件表达式是一个更大函数中的一部分，首先对条件表达式进行分析，然后使用`Extract Method (110)`将它提炼到一个独立函数去。
- 如果有必要，使用`Move Method (142)`将条件表达式放置到继承结构的顶端。
- 任选一个子类，在其中建立一个函数，使之覆写超类中容纳条件表达式的那个函数。将与该子类相关的条件表达式分支复制到新建函数中，并对它进行适当调整。
  - ⇒为了顺利进行这一步骤，你可能需要将超类中的某些`private`字段声明为`protected`。
- 编译，测试。
- 在超类中删掉条件表达式内被复制了的分支。
- 编译，测试。
- 针对条件表达式的每个分支，重复上述过程，直到所有分支都被移到子类内的函数为止。
- 将超类之中容纳条件表达式的函数声明为抽象函数。

<br>

