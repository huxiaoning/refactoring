# 动机

<br>

在强类型`OO`语言中，向下转型是最烦人的事情之一。

之所以很烦人，是因为从感觉上来说它完全没有必要；

你竟然越俎代庖地告诉编译器某些应该由编译器自己计算出来的东西。

但是，由于计算对象类型往往比较麻烦，你还是常常需要亲自告诉编译器对象的确切类型。

向下转型在`Java`特别盛行，因为`Java`没有模板机制，因此如果你想从集合之中取出一个对象，就必须进行向下转型。[^1]

<br>

向下转型也许是一种无法避免的罪恶，但你仍然应该尽可能少做。

如果你的某个函数返回一个值，并且你知道所返回的对象类型比函数签名所昭告的更特化，你便是在函数用户身上强加了非必要的工作。

这种情况下你不应该要求用户承担向下转型的责任，应该尽量为他们提供准确的类型。

<br>

以上所说的情况，常会在返回迭代器或集合的函数身上发生。

此时你就应该观察人们拿这个迭代器干什么用，然后针对性地提供专用函数。

<br>

[^1]: 自从`Java 5`加入模板机制以后，非向下转型不可的场合几乎绝迹。读者如果发现自己写出需要向下转型的代码，在考虑使用本重构手法之前，应该首先考虑是否可以代之以模板类。—译者注

