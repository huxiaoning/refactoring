# 做法

<br>

- 使用Self Encapsulate Field（171）将类型码自我封装起来。
- 新建一个类，根据类型码的用途为它命名。这就是一个状态对象。
- 为这个新类添加子类，每个子类对应一种类型码。
  - ⇒比起逐一添加，一次性加入所有必要的子类可能更简单些。
- 在超类中建立一个抽象的查询函数，用以返回类型码。在每个子类中覆写该函数，返回确切的类型码。
- 编译。
- 在源类中建立一个字段，用以保存新建的状态对象。
- 调整源类中负责查询类型码的函数，将查询动作转发给状态对象。
- 调整源类中为类型码设值的函数，将一个恰当的状态对象子类赋值给“保存状态对象”的那个字段。
- 编译，测试。

<br>

