# 做法

<br>

- 使用`Self Encapsulate Field (171)`将类型码自我封装起来。
  - ⇒如果类型码被传递给构造函数，就需要将构造函数换成工厂函数。
- 为类型码的每一个数值建立一个相应的子类。在每个子类中覆写类型码的取值函数，使其返回相应的类型码值。
  - ⇒这个值被硬编码于`return`句中（例如， `return 1`），这看起来很肮脏，但只是权宜之计。当所有`case`子句都被替换后，问题就解决了。
- 每建立一个新的子类，编译并测试。
- 从超类中删掉保存类型码的字段。将类型码访问函数声明为抽象函数。
- 编译，测试。

<br>

